<div class="modal-header">
    <h4 class="modal-title pull-left">Manage Payment Profiles</h4>
    <a href="javascript:void(0);" ng-click="vm.close()" class="pull-right"><i class="fa fa-remove"></i></a>
</div>
<div class="modal-body">
    <div class="table-scrollable">
        <table class="table table-striped table-bordered table-hover dataTable no-footer" id="sample_1" role="grid" aria-describedby="sample_1_info">
            <thead>
                <tr role="row">
                    <th width="40" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" aria-label="Primary">
                        IsPrimary
                    </th>
                    <th width="40" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" aria-label="Name">
                        Name
                    </th>
                    <th width="40" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" aria-label="Digits">
                        Instrument Type / Number
                    </th>
                    <th width="40" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" aria-label="Expiry Date">
                        Expiry Date
                    </th>
                    <th width="100">Action</th>
                </tr>
            </thead>
            <tbody>
                <tr class="gradeX odd" role="row" ng-repeat="card in vm.cardDetails">
                    <td>

                        <div class="md-radio">
                            <input type="radio" id="primary{{$index}}" name="primary" class="md-radiobtn"
                                   ng-model="card.isPrimary" ng-value="true" ng-click="vm.setPrimary(card.instrumentIds)">
                            <label for="primary{{$index}}">
                                <span></span>

                                <span class="check"></span>
                                <span class="box"></span>
                            </label>
                        </div>
                    </td>
                    <td>{{card.name}}</td>
                    <td>{{card.cardType}} - {{card.number}}</td>
                    <td>{{card.expirationDate}}</td>
                    <td>
                        <a ng-click="vm.manageCard(card.instrumentIds, card.isActive)">{{card.isActive==false?"Resume":"Suspend"}}</a> <br />
                        <a ng-click="vm.deleteCard(card.instrumentIds)">Delete</a>
                    </td>
                </tr>
            </tbody>
            <tr ng-if="vm.cardDetails.length == 0">
                <td colspan="11" class="text-center"><span> No Records Found</span></td>
            </tr>
        </table>
    </div>

    <div class="row col-md-3">
        <div class="form-group form-md-line-input form-md-floating-label">
            <select class="form-control" id="type" ng-model="vm.paymentType" name="type"
                    ng-options="type.value as type.display for type in vm.instrumentTypes | filter: {value: '!43'}">
                <option selected disabled hidden style='display: none' value=''></option>
            </select>
            <label for="type">Payment Type</label>
        </div>
    </div>
    <br />
    <br />

    <div ng-if="vm.paymentType == 42">
        <form role="form" name="eCheck_form">
            <div ng-include src="'/modules/sales/views/create-eCheck.client.view.html'"></div>
        </form>
        <div class="modal-footer">
            <button type="button" class="btn default" ng-click="vm.close();">Close</button>
            <button type="submit" class="btn default" ng-click="vm.save(eCheck_form);" ng-disabled="eCheck_form.$invalid || vm.isProcessing == true">Save</button>
        </div>
    </div>

    <div ng-if="vm.paymentType == 41">
        <form role="form" name="payment_form">
            <div ng-include src="'/modules/sales/views/create-charge-card.client.view.html'"></div>
        </form>
        <div class="modal-footer">
            <button type="button" class="btn default" ng-click="vm.close();">Close</button>
            <button type="submit" class="btn default" ng-click="vm.save(payment_form);" ng-disabled="payment_form.$invalid || vm.inValidExpirydate != false || vm.isProcessing == true">Save</button>
        </div>
    </div>
</div>


