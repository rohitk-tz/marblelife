<style>
    .margin-right-5{
        margin-right:5px !important;
    }
</style>

<div class="row">
    <div class="col-md-12">
        <div class="clearfix page-controls">
            <div class="dataTables_length pull-left m-t-15 showing-record search-single" id="sample_1_length">
                <label>
                    Show
                    <select name="sample_1_length" aria-controls="sample_1" class="form-control input-xsmall input-inline"
                            ng-model="vm.query.pageSize" ng-options="option.value as option.display for option in vm.pagingOptions"
                            ng-change="vm.getCustomers();">
                        <option selected disabled hidden style='display: none' value=''></option>
                    </select> records
                </label>
            </div>
            <div class="pull-right search-btn-wrap">
                <div class="search-box">
                    <div class="pull-left search-single">
                        <div class="form-group form-md-line-input form-md-floating-label">
                            <select class="form-control input-small" id="search-option" ng-model="vm.searchOption"
                                    ng-change="vm.resetSeachOption()"
                                    ng-options="item.value as item.display for item in vm.searchOptions">
                                <option selected disabled hidden style='display: none' value=''></option>
                            </select>
                            <label for="search-option">Search Options</label>
                        </div>
                    </div>
                    <div class="pull-left search-single" ng-if="vm.isSuperAdmin && vm.searchOption == '4'">
                        <div class="form-group form-md-line-input form-md-floating-label">
                            <select class="form-control input-small" id="franchisee" ng-model="vm.query.franchiseeId"
                                    ng-options="franchisee.value as franchisee.display for franchisee in vm.franchiseeCollection">
                                <option selected disabled hidden style='display: none' value=''></option>
                            </select>
                            <label for="franchisee">Franchisee</label>
                        </div>
                    </div>
                    <div class="pull-left search-single" ng-if="vm.searchOption == '2'" style="margin-top:-8px !important">
                        <div class="form-group form-md-line-input form-md-floating-label enterText">
                            <input type="search" class="form-control input-sm" placeholder="" aria-controls="sample_1"
                                   ng-model="vm.query.text">
                            <label>Search</label>
                        </div>
                    </div>
                    <div class="pull-left search-single" ng-if="vm.searchOption == '1'">
                        <div class="form-group form-md-line-input form-md-floating-label">
                            <select class="form-control input-small" id="franchisee" ng-model="vm.query.receiveNotification"
                                    ng-options="receiveN.value as receiveN.display for receiveN in vm.ReceiveNotification">
                                <option disabled value=''></option>
                            </select>
                            <label for="franchisee">Select</label>
                        </div>
                    </div>
                    <div class="pull-left search-single" ng-if="vm.searchOption == '12'">
                        <div class="form-group form-md-line-input form-md-floating-label">
                            <select class="form-control input-small" id="search-option" ng-change="vm.resetAdvanceSearchOption()" ng-model="vm.searchAdvancedOption"
                                    ng-options="item.value as item.display for item in vm.searchAdvancedOptions">
                                <option selected disabled hidden style='display: none' value=''></option>
                            </select>
                            <label for="search-option">Customer</label>
                        </div>
                    </div>
                    <div class="pull-left search-single" ng-if="(vm.searchAdvancedOption == '5' || vm.searchAdvancedOption == '6'||
                                                 vm.searchAdvancedOption == '7' || vm.searchAdvancedOption == '9' || vm.searchAdvancedOption == '10' || vm.searchAdvancedOption == '11') && vm.searchOption != '2'">
                        <div class="form-group form-md-line-input form-md-floating-label enterText" style="padding-top:1px !important">
                            <input type="search" class="form-control input-small" placeholder="" aria-controls="sample_1"
                                   ng-model="vm.query.advancedText" />
                            <label>Enter Text</label>
                        </div>
                    </div>
                    <div class="pull-left search-single" ng-if="vm.searchOption == '8' || vm.searchOption == '9' || vm.searchOption == '10' || vm.searchOption == '11' || vm.searchOption == '13'">
                        <div class="form-group form-md-line-input form-md-floating-label enterText" style="padding-top:1px !important">
                            <input type="search" class="form-control input-small" placeholder="" aria-controls="sample_1"
                                   ng-model="vm.query.advancedText" />
                            <label>Enter Text</label>
                        </div>
                    </div>
                    <div class="pull-left search-single" ng-if="vm.searchOption == '3'">
                        <div class="form-group form-md-line-input form-md-floating-label">
                            <input type="text" class="form-control input-small" id="date-range" date-range-picker
                                   start-date="vm.query.fromDate" end-date="vm.query.toDate">
                            <label for="date-range">Date Range</label>
                        </div>
                    </div>
                    <div class="pull-left search-single" ng-if="vm.searchOption != '3'">
                        <div class="form-group form-md-line-input form-md-floating-label">
                            <input type="text" class="form-control input-small" id="date-range" date-range-picker
                                   start-date="vm.query.dateCreated" end-date="vm.query.dateModified">
                            <label for="date-range">Date Range</label>
                        </div>
                    </div>
                    <div class="pull-left margin-right-5 m-t-5">
                        <a class="btn btn-icon-only mbl" ng-click="vm.getCustomers();">
                            <i class="fa fa-search"></i>
                        </a>
                    </div>
                    <div class="pull-left margin-right-5 m-t-5">
                        <a class="btn btn-icon-only mbl" ng-click="vm.resetSearch();">
                            <i class="fa fa-remove"></i>
                        </a>
                    </div>
                    <div class="pull-left margin-right-5 m-t-5">
                        <a class="btn btn-icon-only mbl" ng-click="vm.refresh();">
                            <i class="fa fa-refresh"></i>
                        </a>
                    </div>
                    <div class="pull-left margin-right-5 m-t-5">
                        <button id="sample_editable_1_new" ng-click="vm.downloadCustomerList()" class="btn btn-primary" ng-disabled="vm.customerIds.length < 1 || vm.downloading == true">
                            Download
                        </button>
                    </div>
                    <div class="pull-left m-t-5">
                        <button id="sample_editable_1_new" ng-click="vm.uploadNewFile()" class="btn btn-primary">
                            Upload New
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix">
            <div class="pull-left">
                <div class="dataTables_info" id="sample_1_info" role="status" aria-live="polite" ng-if="vm.customers.length > 0">
                    Showing
                    <span ng-if="(vm.query.pageNumber * vm.query.pageSize) <= vm.count">{{((vm.query.pageNumber - 1) * vm.query.pageSize)+ 1}} to {{vm.query.pageNumber * vm.query.pageSize}} of {{vm.count}} </span>
                    <span ng-if="(vm.query.pageNumber * vm.query.pageSize) > vm.count">{{((vm.query.pageNumber - 1) * vm.query.pageSize)+ 1}} to {{vm.count}} of {{vm.count}} </span>
                    records
                </div>
            </div>
            <div class="pull-right" ng-if="vm.customers.length < vm.count">
                <div class="dataTables_paginate paging_bootstrap_full_number" id="sample_1_paginate">
                    <ul uib-pagination boundary-links="true" total-items="vm.count" ng-change="vm.pageChange()" items-per-page="vm.query.pageSize"
                        ng-model="vm.query.pageNumber" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" max-size="'5'"
                        last-text="&raquo;"></ul>
                </div>
            </div>
        </div>
        <div class="table-scrollable table-mbl">
            <div style="max-height: 630px; overflow: scroll;">
                <table class="table table-striped table-bordered table-hover dataTable  no-footer" id="sample_1" role="grid" aria-describedby="sample_1_info">
                    <thead fix-head>
                        <tr role="row">
                            <th ng-class="{'sorting_desc': vm.query.sort.order == 1 && vm.query.sort.propName == vm.SortColumns.Id,
                                                        'sorting_asc' : vm.query.sort.order == 0  && vm.query.sort.propName == vm.SortColumns.Id,
                                                        'sorting': vm.query.sort.propName != vm.SortColumns.Id }"
                                tabindex="0" aria-controls="sample_1"
                                rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name" style="width: 100px; min-width: 100px; max-width: 100px;" ng-click="vm.sorting(vm.SortColumns.Id);">
                                ID#
                            </th>
                            <th ng-class="{'sorting_desc': vm.query.sort.order == 1 && vm.query.sort.propName == vm.SortColumns.Name,
                                                        'sorting_asc' : vm.query.sort.order == 0  && vm.query.sort.propName == vm.SortColumns.Name,
                                                        'sorting': vm.query.sort.propName != vm.SortColumns.Name }"
                                tabindex="0" aria-controls="sample_1" rowspan="1"
                                colspan="1" aria-sort="ascending" aria-label="Name" style="width: 120px; min-width: 120px; max-width: 120px;" ng-click="vm.sorting(vm.SortColumns.Name);">
                                Name
                            </th>
                            <th ng-class="{'sorting_desc': vm.query.sort.order == 1 && vm.query.sort.propName == vm.SortColumns.Email,
                                                        'sorting_asc' : vm.query.sort.order == 0  && vm.query.sort.propName == vm.SortColumns.Email,
                                                        'sorting': vm.query.sort.propName != vm.SortColumns.Email }"
                                rowspan="1" colspan="1" aria-label="Email" style="width: 120px; min-width: 120px; max-width: 120px;" ng-click="vm.sorting(vm.SortColumns.Email);">
                                Email
                            </th>
                            <th ng-class="{'sorting_desc': vm.query.sort.order == 1 && vm.query.sort.propName == vm.SortColumns.Phone,
                                                        'sorting_asc' : vm.query.sort.order == 0  && vm.query.sort.propName == vm.SortColumns.Phone,
                                                        'sorting': vm.query.sort.propName != vm.SortColumns.Phone }"
                                rowspan="1" colspan="1" aria-label="Phone" style="width: 100px; min-width: 100px; max-width: 100px; line-height:20px;" ng-click="vm.sorting(vm.SortColumns.Phone);">
                                Phone
                            </th>
                            <th tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" aria-label="Address" style="width: 150px; min-width: 150px; max-width: 150px;">
                                Address
                            </th>
                            <th ng-class="{'sorting_desc': vm.query.sort.order == 1 && vm.query.sort.propName == vm.SortColumns.Country,
                                                        'sorting_asc' : vm.query.sort.order == 0  && vm.query.sort.propName == vm.SortColumns.Country,
                                                        'sorting': vm.query.sort.propName != vm.SortColumns.Country }"
                                tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" aria-label="Country" style="width: 80px; min-width: 80px; max-width: 80px;"
                                ng-click="vm.sorting(vm.SortColumns.Country);">
                                Country
                            </th>
                            <th ng-class="{'sorting_desc': vm.query.sort.order == 1 && vm.query.sort.propName == vm.SortColumns.ContactName,
                                                        'sorting_asc' : vm.query.sort.order == 0  && vm.query.sort.propName == vm.SortColumns.ContactName,
                                                        'sorting': vm.query.sort.propName != vm.SortColumns.ContactName }"
                                tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" aria-label="ContactName" style="width: 110px; min-width: 110px; max-width: 110px;"
                                ng-click="vm.sorting(vm.SortColumns.ContactName);">
                                Contact Person
                            </th>
                            <th class="sorting_disabled" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" aria-label="LastInvoice" style="min-width: 180px; min-width: 180px; max-width: 180px;">
                                Last Invoice
                            </th>
                            <th ng-class="{'sorting_desc': vm.query.sort.order == 1 && vm.query.sort.propName == vm.SortColumns.MarketingClass,
                                                        'sorting_asc' : vm.query.sort.order == 0  && vm.query.sort.propName == vm.SortColumns.MarketingClass,
                                                        'sorting': vm.query.sort.propName != vm.SortColumns.MarketingClass }"
                                tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" aria-label="MarketingClass" style="min-width: 180px; min-width: 180px; max-width: 180px;"
                                ng-click="vm.sorting(vm.SortColumns.MarketingClass);">
                                Marketing Class
                            </th>
                            <th ng-if="vm.isSuperAdmin" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" aria-label="Franchisee" style="width: 100px; min-width: 100px; max-width: 100px;">
                                Franchisee
                            </th>
                            <th ng-class="{'sorting_desc': vm.query.sort.order == 1 && vm.query.sort.propName == vm.SortColumns.DateCreated,
                                                        'sorting_asc' : vm.query.sort.order == 0  && vm.query.sort.propName == vm.SortColumns.DateCreated,
                                                        'sorting': vm.query.sort.propName != vm.SortColumns.DateCreated }"
                                tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" aria-label="DateCreated" style="min-width: 110px; min-width: 110px; max-width: 110px;"
                                ng-click="vm.sorting(vm.SortColumns.DateCreated);">
                                Date Created
                            </th>
                            <th ng-class="{'sorting_desc': vm.query.sort.order == 1 && vm.query.sort.propName == vm.SortColumns.DateModified,
                                                        'sorting_asc' : vm.query.sort.order == 0  && vm.query.sort.propName == vm.SortColumns.DateModified,
                                                        'sorting': vm.query.sort.propName != vm.SortColumns.DateModified }"
                                tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" aria-label="MarketingClass" style="min-width: 110px; min-width: 110px; max-width: 110px;"
                                ng-click="vm.sorting(vm.SortColumns.DateModified);">
                                Date Modified
                            </th>
                            <th ng-class="{'sorting_desc': vm.query.sort.order == 1 && vm.query.sort.propName == vm.SortColumns.TotalSales,
                                                        'sorting_asc' : vm.query.sort.order == 0  && vm.query.sort.propName == vm.SortColumns.TotalSales,
                                                        'sorting': vm.query.sort.propName != vm.SortColumns.TotalSales }"
                                tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" aria-label="TotalSales" style="min-width: 80px; min-width: 80px; max-width: 80px;"
                                ng-click="vm.sorting(vm.SortColumns.TotalSales);">
                                Total Sales
                            </th>
                            <th ng-class="{'sorting_desc': vm.query.sort.order == 1 && vm.query.sort.propName == vm.SortColumns.AvgSales,
                                                        'sorting_asc' : vm.query.sort.order == 0  && vm.query.sort.propName == vm.SortColumns.AvgSales,
                                                        'sorting': vm.query.sort.propName != vm.SortColumns.AvgSales }"
                                tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" aria-label="AvgSales" style="min-width: 80px; min-width: 80px; max-width: 80px;"
                                ng-click="vm.sorting(vm.SortColumns.AvgSales);">
                                Avg. Sales
                            </th>
                            <th tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" aria-label="TotalInvoices" style="min-width: 80px; min-width: 80px; max-width: 80px;">
                                Total Invoices
                            </th>
                            <th class="sorting_disabled" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" aria-label="Sales Data" style="min-width: 100px; min-width: 100px; max-width: 100px;">
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="gradeX odd" role="row" ng-repeat="customer in vm.customers">
                            <td class="sorting_1" style="width: 100px; min-width: 100px; max-width: 100px;">
                                {{customer.customerId}} &nbsp;
                                <span>
                                    <i ng-if="customer.isSynced" class="fa fa-envelope fa-2x icon_feedback_received" title="Customer Email is Synced with Email API."></i>
                                </span>
                            </td>
                            <td style="width: 120px; min-width: 120px; max-width: 120px;">
                                {{customer.name}}
                            </td>
                            <td class="break_word" style="width: 120px;    min-width: 120px;    max-width: 120px;">
                                <span ng-repeat="email in customer.emails">
                                    <a href="mailto:{{email}}"> {{email}}</a><br />
                                </span>
                            </td>
                            <td style="width: 100px;    min-width: 100px;    max-width: 100px;">
                                <span>{{customer.phoneNumber | phonemask :customer.address.countryId}}</span>
                            </td>
                            <td style="width: 150px;    min-width: 150px;    max-width: 150px;">
                                <span ng-if="customer.address != null && customer.address.addressLine1 != null">{{customer.address.addressLine1}}</span>
                                <span ng-if="customer.address != null && customer.address.addressLine2 != null">, {{customer.address.addressLine2}} </span>
                                <span ng-if="customer.address != null && customer.address.city != null">, {{customer.address.city}} </span>
                                <span ng-if="customer.address != null && customer.address.state != null">, {{customer.address.state}}</span>
                                <span ng-if="customer.address != null && customer.address.city != null">, {{customer.address.zipCode}} </span>
                            </td>
                            <td style="width: 80px;    min-width: 80px;    max-width: 80px;">  <span ng-if="customer.address != null && customer.address.country != null"> {{customer.address.country}} </span> </td>
                            <td style="width: 110px;    min-width: 110px;    max-width: 110px;">  <span> {{customer.contactPerson}}</span> </td>
                            <td style="width: 120px;    min-width: 120px;    max-width: 120px;">
                                <span ng-if="customer.lastInvoiceId > 0">
                                    Id : {{customer.lastInvoiceId}}
                                </span> <br />
                                <span ng-if="customer.amount > 0">
                                    Amount : <span currency-Exchange conversion-Rate="customer.currencyRate"
                                                   input="customer.amount" from-Currency="customer.currencyCode">
                                    </span><br />
                                </span>
                                <span ng-if="customer.lastInvoiceId <= 0 && customer.amount <= 0"> - </span>
                                <span ng-if="customer.lastServicedDate!=null">Invoice Date : {{customer.lastServicedDate | dateTimeFilter : 'd'}}</span>
                            </td>
                            <td style="width: 180px;    min-width: 180px;    max-width: 180px;">
                                <div class="row form-group form-md-line-input form-md-floating-label">
                                    <div class="col-md-8">
                                        <div data-ng-hide="editMode">
                                            <span class="break_word">{{customer.marketingClass}}</span>
                                        </div>
                                        <div data-ng-show="editMode">
                                            <select class="form-control" id="class" ng-model="customer.classTypeId" name="class"
                                                    ng-options="class.value as class.display for class in vm.marketingClass" data-ng-required>
                                                <option selected disabled hidden style='display: none' value=''></option>
                                            </select>
                                        </div>
                                    </div>
                                    <a class="col-md-4 glyphicon glyphicon-edit" data-ng-hide="editMode" data-ng-click="editMode = !editMode"></a>
                                    <a class="col-md-2 glyphicon glyphicon-ok" data-ng-show="editMode" data-ng-click="vm.updateMarketingClass(customer.customerId,customer.classTypeId);"></a>
                                    <a class="col-md-2 glyphicon glyphicon-remove" data-ng-show="editMode" data-ng-click="editMode = !editMode"></a>
                                </div>
                            </td>
                            <td ng-if="vm.isSuperAdmin" style="width: 100px; min-width: 100px; max-width: 100px;">
                                <span ng-if="customer.franchiseeName != null"> {{customer.franchiseeName}} </span>
                            </td>
                            <td style="width: 110px;    min-width: 110px;    max-width: 110px;">  <span> {{customer.dateCreated  | dateTimeFilter : 'd'}} </span> </td>
                            <td style="width: 110px;    min-width: 110px;    max-width: 110px;">  <span> {{customer.dateModified  | dateTimeFilter : 'd'}} </span> </td>
                            <td style="width: 80px;    min-width: 80px;    max-width: 80px;">
                                <span ng-if="customer.totalSales > 0">
                                    <span currency-Exchange conversion-Rate="customer.currencyRate"
                                          input="customer.totalSales" from-Currency="customer.currencyCode">
                                    </span>
                                </span>
                            </td>

                            <td style="width: 80px;    min-width: 80px;    max-width: 80px;">
                                <span ng-if="customer.avgSales > 0">
                                    <span currency-Exchange conversion-Rate="customer.currencyRate"
                                          input="customer.avgSales" from-Currency="customer.currencyCode">
                                    </span>
                                </span>
                            </td>
                            <td style="width: 80px;    min-width: 80px;    max-width: 80px;">
                                <span>
                                    {{customer.totalNumberOfInvoices}}
                                </span>
                            </td>
                            <td style="width: 100px;    min-width: 100px;    max-width: 100px;">
                                <a ng-click="vm.editCustomer(customer.customerId)">Edit</a><br />
                                <a ng-click="vm.viewSalesData(customer.customerId)">View Sales Data</a>
                            </td>
                        </tr>
                    </tbody>
                    <tr ng-if="vm.customers.length == 0">
                        <td colspan="16" class="text-center"><span> No Records Found</span></td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="row">
            <div class="col-md-5 col-sm-5">
                <div class="dataTables_info" id="sample_1_info" role="status" aria-live="polite" ng-if="vm.customers.length > 0">
                    Showing
                    <span ng-if="(vm.query.pageNumber * vm.query.pageSize) <= vm.count">{{((vm.query.pageNumber - 1) * vm.query.pageSize)+ 1}} to {{vm.query.pageNumber * vm.query.pageSize}} of {{vm.count}} </span>
                    <span ng-if="(vm.query.pageNumber * vm.query.pageSize) > vm.count">{{((vm.query.pageNumber - 1) * vm.query.pageSize)+ 1}} to {{vm.count}} of {{vm.count}} </span>
                    records
                </div>
            </div>
            <div class="col-md-7 col-sm-7" ng-if="vm.customers.length < vm.count">
                <div class="dataTables_paginate paging_bootstrap_full_number" id="sample_1_paginate">
                    <ul uib-pagination boundary-links="true" total-items="vm.count" ng-change="vm.pageChange()" items-per-page="vm.query.pageSize"
                        ng-model="vm.query.pageNumber" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" max-size="'5'"
                        last-text="&raquo;"></ul>
                </div>
            </div>
        </div>
    </div>
</div>
