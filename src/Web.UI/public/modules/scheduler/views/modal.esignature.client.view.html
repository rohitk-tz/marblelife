<div class="modal-header">
    <h4 class="modal-title pull-left">Add {{vm.customerName}} ESignature</h4>
    <a href="javascript:void(0);" ng-click="vm.close()" class="pull-right"><i class="fa fa-remove"></i></a>
</div>
<style>
    .modal-body.ng-scope {
        max-height: unset;
    }

    html, body {
        height: 100%;
        width: 100%;
        margin: 0;
        padding: 0;
    }

    .container {
        border: 1px solid transparent;
        padding: 10px 10px 40px 10px;
        position: relative;
        margin: 0 auto 0 auto;
        height: 100%;
        margin-left: 0px !important;
    }

        .container .signature {
            border: 1px solid white;
            /*margin: 0 auto;*/
            cursor: pointer;
        }

            .container .signature canvas {
                border: 1px solid #999;
                /*margin: 0 auto;*/
                cursor: pointer;
            }

        .container .buttons {
            position: absolute;
            bottom: 10px;
            left: 10px;
        }

        .container .sizes {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }

            .container .sizes input {
                width: 4em;
                text-align: center;
            }

    .result {
        border: 1px solid blue;
        margin: 30px auto 0 auto;
        height: 220px;
        width: 568px;
    }
    .pointer {
        cursor: pointer;
    }
</style>
<div class="modal-body">
    <div class="col-md-12" style="border-color:black !important;" ng-style="{'max-width': boundingBox.width + 'px', 'max-height': boundingBox.height + 'px'}">
        <div style="font-size:15px; margin-bottom:5px;" ng-if="!vm.alreadyUsedSign">
            Please check the checkboxes for the invoices which you want to sign.
            <br />
        </div>
        <div style="font-size:15px; margin-bottom:5px;" ng-if="vm.alreadyUsedSign">
            Checkboxes are checked for the invoices which are signed.
            <br />
        </div>
        <div ng-if="!vm.alreadyUsedSign">
            <label>
                <input type="checkbox" ng-model="vm.allCheck" ng-click="vm.selectAllCheckboxes()" /> &nbsp;&nbsp;All
            </label>
            <div ng-repeat="item in vm.invoiceNumberList track by $index">
                <label>
                    <input type="checkbox" name="{{item.label}}" ng-click="vm.allCheckUncheck()" ng-model="item.selected" /> &nbsp;&nbsp;{{item.label}} &nbsp;&nbsp;&nbsp;
                </label>
                <i class="fa fa-download pointer" aria-hidden="true" ng-click="vm.downloadInvoice(item.invoiceNumber)"></i>
            </div>
        </div>
        <div ng-if="vm.alreadyUsedSign">
            <!--<label>
                <input type="checkbox" ng-model="vm.allCheckedSignature" disabled/> &nbsp;&nbsp;All
            </label>-->
            <div ng-repeat="item in vm.invoiceNumberList track by $index">
                <label>
                    <input type="checkbox" name="{{item.label}}" ng-model="item.isSignedCheckBox" disabled /> &nbsp;&nbsp;{{item.label}} &nbsp;&nbsp;&nbsp;
                </label>
                <i class="fa fa-download pointer" aria-hidden="true" ng-click="vm.downloadInvoice(item.invoiceNumber)"></i>&nbsp;&nbsp;&nbsp;
                <a ng-if="item.isSigned" ng-click="vm.getAlreadySigned(item.invoiceNumber)">(Already signed)</a>
            </div>
        </div>
        <div ng-if="!vm.alreadyUsedSign" style="margin-top:5px;">
            <signature-pad id="colors_sketch" accept="accept" clear="clear" height="300" width="1000" dataurl="dataurl"></signature-pad>
        </div>
        <div ng-if="vm.alreadyUsedSign" style="margin-top:5px;">
            <img src="{{vm.signature}}" style="width:900px; height:400px;">
        </div>
        <br />
        <div class="buttons">
            <div class="row" style="float:right; margin-right:0px;">
                <button class="btn btn-default" ng-click="vm.clear()" ng-if="!vm.alreadyUsedSign">Clear</button>
                <button class="btn btn-primary" ng-click="vm.getAlreadySigned()" ng-if="vm.isSigned && !vm.alreadyUsedSign">Already Signed</button>
                <button class="btn btn-primary" ng-click="vm.alreadyUsedSign=false;" ng-if="vm.alreadyUsedSign">Add New Sign</button>
                <button class="btn btn-primary" ng-click="vm.save()" ng-if="!vm.alreadyUsedSign">Save</button>
            </div>
        </div>

    </div>
</div>
<script src="../directives/signature_pad.js"></script>
