<style>
    .dropdown-menu li span > a {
        padding: 8px 14px;
        color: #555;
        text-decoration: none;
        display: block;
        clear: both;
        font-weight: 300;
        line-height: 18px;
        /*        white-space: nowrap;*/
    }

        .dropdown-menu li span > a:hover, .dropdown-menu .active > a, .dropdown-menu .active > a:hover {
            text-decoration: none;
            background-image: none;
            background-color: #f6f6f6;
            color: #555;
            filter: none;
        }

    .backGroundColors {
        color: #26327e !important;
        font-weight: bolder;
    }

    .heading {
        font: bolder;
        font-size: 15px;
    }

    .fix-width th, .fix-width td {
        width: 150px !important;
    }

    .fix-width {
        width: 1900px !important;
    }

    .fix-width-print th, .fix-width-print td {
    }

    .fix-width-print {
        width: 100% !important;
    }
</style>
<div class="row">
    <div class="col-md-12">
        <div class="clearfix page-controls">
            <div class="pull-left" style="align-items:center;">
                <strong>Total Franchisee Count: {{vm.franchiseeCount}}</strong>
            </div>
            <div class="pull-right search-btn-wrap">
                <div class="search-box">
                    <div class="pull-left search-single">
                        <div class="form-group form-md-line-input form-md-floating-label">
                            <select class="form-control input-small" id="search-option" ng-model="vm.searchOption"
                                    ng-change="vm.resetSeachOption()"
                                    ng-options="item.value as item.display for item in vm.searchOptions">
                                <option selected disabled hidden style='display: none' value=''></option>
                            </select>
                            <label for="search-option">Search Options</label>
                        </div>
                    </div>
                    <div class="pull-left search-single" ng-if="vm.searchOption == '4'">
                        <div class="form-group form-md-line-input form-md-floating-label">
                            <select class="form-control input-small" id="search-option" ng-model="vm.query.status"
                                    ng-change="vm.getFranchiseeList();"
                                    ng-options="item.value as item.display for item in vm.activeInActiveOptions">
                                <option selected disabled hidden style='display: none' value=''></option>
                            </select>
                            <label for="search-option">Search Options</label>
                        </div>
                    </div>
                    <div class="pull-left search-single" ng-if="vm.searchOption == '1'">
                        <div class="form-group form-md-line-input form-md-floating-label" ng-if="vm.searchOption == '1'">
                            <select class="form-control input-small" id="franchisee" ng-model="vm.query.franchiseeId"
                                    ng-change="vm.getFranchiseeList();"
                                    ng-options="franchisee.value as franchisee.display for franchisee in vm.franchiseeCollection">
                                <option disabled value=''></option>
                            </select>
                            <label for="franchisee">Franchisee</label>
                        </div>
                    </div>
                    <div class="pull-left search-single" ng-if="vm.searchOption == '2'">
                        <div class="form-group form-md-line-input form-md-floating-label">
                            <input type="search" class="form-control input-sm" placeholder="" aria-controls="sample_1"
                                   ng-model="vm.query.email" key-stroke-action change="vm.getFranchiseeList">
                            <label>Search</label>
                        </div>
                    </div>
                    <div class="pull-left search-single" ng-if="vm.searchOption == '3' || vm.searchOption == ''" style="margin-top:-13px !important">
                        <div class="form-group form-md-line-input form-md-floating-label">
                            <input type="search" class="form-control input-sm" style="margin-top: 6px;" placeholder="" aria-controls="sample_1"
                                   ng-model="vm.query.text" key-stroke-action change="vm.getFranchiseeList">
                            <label>Search</label>
                        </div>
                    </div>
                    <div class="pull-left search-single m-t-5">
                        <a class="btn btn-icon-only mbl" ng-click="vm.resetSearch();">
                            <i class="fa fa-remove"></i>
                        </a>
                    </div>
                    <div class="pull-left m-t-5">
                        <button class="btn btn-primary" ng-print-amchart print-element-id="printSection" title="print"><i class="fa fa-print"></i></button>
                        <button id="sample_editable_1_new" ng-click="vm.downloadFile()" class="btn btn-primary">
                            Download
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="table-scrollable table-mbl">
            <div style="height: 600px; overflow: auto;">
                <table class="table table-striped table-bordered table-hover dataTable no-footer fix-width" role="grid" aria-describedby="sample_1_info">
                    <thead fix-head>
                        <tr role="row">
                            <th style="width: 100px; min-width: 100px; max-width: 100px;text-align: center;" tabindex="0" aria-controls="sample_1" aria-sort="ascending" aria-label="Name">
                            </th>
                            <th style="width: 100px; min-width: 100px; max-width: 100px;text-align: center;" tabindex="0" aria-controls="sample_1" aria-sort="ascending" aria-label="Name"
                                ng-click="vm.sorting(vm.SortColumns.Account);">
                                ID#
                            </th>
                            <th style="width: 100px; min-width: 100px; max-width: 100px;text-align: center;" tabindex="0" aria-controls="sample_1" aria-sort="ascending" aria-label="Name"
                                ng-click="vm.sorting(vm.SortColumns.Name);">
                                Name
                            </th>
                            <th style="width: 100px; min-width: 100px; max-width: 100px;text-align: center;" aria-label="Email" ng-click="vm.sorting(vm.SortColumns.Email);">
                                Email
                            </th>
                            <th style="width: 100px; min-width: 100px; max-width: 100px;text-align: center;" aria-label="Primary Contact" ng-click="vm.sorting(vm.SortColumns.PrimaryContact);">
                                Primary Contact
                            </th>
                            <th style="width: 100px; min-width: 100px; max-width: 100px;text-align: center;" tabindex="0" aria-controls="sample_1" aria-label="Address" ng-click="vm.sorting(vm.SortColumns.StreetAddress);">
                                Street Address
                            </th>

                            <th style="width: 100px; min-width: 100px; max-width: 100px;text-align: center;" tabindex="0" aria-controls="sample_1" aria-label="Country" ng-click="vm.sorting(vm.SortColumns.Country);">
                                State
                            </th>
                            <th style="width: 100px; min-width: 100px; max-width: 100px;text-align: center;" tabindex="0" aria-controls="sample_1" aria-label="Country" ng-click="vm.sorting(vm.SortColumns.Country);">
                                City
                            </th>
                            <th style="width: 100px; min-width: 100px; max-width: 100px;text-align: center;" tabindex="0" aria-controls="sample_1" aria-label="Country" ng-click="vm.sorting(vm.SortColumns.Country);">
                                Zip
                            </th>
                            <th style="width: 100px; min-width: 100px; max-width: 100px;text-align: center;" tabindex="0" aria-controls="sample_1" aria-label="Country" ng-click="vm.sorting(vm.SortColumns.Country);">
                                Country
                            </th>

                            <th style="width: 100px; min-width: 100px; max-width: 100px;text-align: center;" tabindex="0" aria-controls="sample_1" aria-label="Country" ng-click="vm.sorting(vm.SortColumns.Country);">
                                Office Number
                            </th>
                            <th style="width: 100px; min-width: 100px; max-width: 100px;text-align: center;" tabindex="0" aria-controls="sample_1" aria-label="Country" ng-click="vm.sorting(vm.SortColumns.Country);">
                                Cell Number
                            </th>
                            <th style="width: 100px; min-width: 100px; max-width: 100px;text-align: center;" tabindex="0" aria-controls="sample_1" aria-label="Country" ng-click="vm.sorting(vm.SortColumns.Country);">
                                Call Center
                            </th>
                            <th style="width: 100px; min-width: 100px; max-width: 100px;text-align: center;" tabindex="0" aria-controls="sample_1" aria-label="Country" ng-click="vm.sorting(vm.SortColumns.Country);">
                                Business Directory
                            </th>
                            <th style="width: 250px; min-width: 250px; max-width: 250px;text-align: center;" tabindex="0" aria-controls="sample_1" aria-label="Country">
                                Duration (in Hours)
                            </th>
                            <th style="width: 250px; min-width: 250px; max-width: 250px;text-align: center;" tabindex="0" aria-controls="sample_1" aria-label="Country">
                                Notes From Call Center/BackUp
                            </th>
                            <th style="width: 200px; min-width: 200px; max-width: 200px;text-align: center;" tabindex="0" aria-controls="sample_1" aria-label="Country">
                                Notes From Owner
                            </th>
                        </tr>
                    </thead>
                    <tbody ng-repeat="franchisee in vm.franchiseeList">
                        <tr role="row">
                            <td colspan="13"><b>{{franchisee.categoryName}}</b></td>
                        </tr>
                        <tr role="row" ng-repeat="franchiseeViewModel in franchisee.franchiseeViewModel">
                            <td class="break_word" style="width: 100px; min-width: 100px; max-width: 100px;left:0px !important">
                                <div class="btn-group pull-right" ng-if="franchiseeViewModel.isAccessible">
                                    <button class="btn blue dropdown-toggle" data-toggle="dropdown">
                                        Action <i class="fa fa-angle-down"></i>
                                    </button>
                                    <ul class="dropdown-menu pull-right" style="left:0px !important">

                                        <li>
                                            <span>
                                                <a ng-click="vm.addNotes(franchiseeViewModel.id,franchiseeViewModel.name,'Change Travel Time Duration for '+franchiseeViewModel.name,'Change Travel Time Duration ( in hours )',1,vm.FranchiseeNotes.FRANCHISEEDURATION,franchiseeViewModel.duration,'')"> Travel Time Duration </a>
                                            </span>
                                        </li>
                                        <li ng-if="vm.isExecutive || vm.isSuperAdmin">
                                            <span>
                                                <a ng-click="vm.addNotes(franchiseeViewModel.id,franchiseeViewModel.name,'Add Notes from Call Center/BackUp for '+franchiseeViewModel.name,'Add Notes from Call Center/BackUp',0,vm.FranchiseeNotes.NOTESFROMCALLCENTER,franchiseeViewModel.duration,franchiseeViewModel.notesFromCallCenter)">Notes from Call Center / Backup</a>
                                            </span>
                                        </li>
                                        <li ng-if="vm.isFranchiseeAdmin || vm.isSuperAdmin">
                                            <span>
                                                <a ng-click="vm.addNotes(franchiseeViewModel.id,franchiseeViewModel.name,'Add Notes from Owner for '+franchiseeViewModel.name,'Add Notes',0,vm.FranchiseeNotes.NOTESFROMOWNER,franchiseeViewModel.duration,franchiseeViewModel.notesFromOwner)">Notes from Owner</a>
                                            </span>
                                        </li>
                                        <li ng-if="franchiseeViewModel.durationApprovalCount > 0 && (vm.isSuperAdmin || vm.isExecutive)">
                                            <span>
                                                <a ng-click="vm.durationApproval(franchiseeViewModel.id,franchiseeViewModel.name)">Duration Approval Pending <b>({{franchiseeViewModel.durationApprovalCount}})</b></a>
                                            </span>
                                        </li>
                                        <li>
                                    </ul>
                                </div>
                            </td>
                            <td class="sorting_1"><span ng-class="{backGroundColors: vm.franchiseeId==franchisee.id}">{{franchiseeViewModel.id}}</span></td>
                            <td><span ng-class="{backGroundColors: vm.franchiseeId==franchisee.id}">{{franchiseeViewModel.name}}</span></td>
                            <td class="break_word" style="width: 200px;"><a href="mailto:{{franchiseeViewModel.email}}">{{franchiseeViewModel.email}}</a></td>
                            <td>{{franchiseeViewModel.ownerName}} </td>
                            <td>{{franchiseeViewModel.address}} </td>
                            <td>{{franchiseeViewModel.state}} </td>
                            <td>{{franchiseeViewModel.city}} </td>
                            <td>{{franchiseeViewModel.zipCode}} </td>
                            <td>{{franchiseeViewModel.country}} </td>
                            <td>{{franchiseeViewModel.officePhone}} </td>
                            <td>{{franchiseeViewModel.cellPhone}} </td>
                            <td>{{franchiseeViewModel.callCenterPhone}} </td>
                            <td>{{franchiseeViewModel.businessPhone}} </td>
                            <td style="text-align:center">{{franchiseeViewModel.duration}} </td>
                            <td style="text-align:center">
                                <span ng-if="franchiseeViewModel.notesFromCallCenter!=null">
                                    <span class="bold">
                                        {{franchiseeViewModel.notesFromCallCenter | limitTo: 45}}{{franchiseeViewModel.notesFromCallCenter.length > 45 ? '...' : ''}}
                                    </span>    <a href="javascript:void(0);" ng-click="vm.getDescription(franchiseeViewModel.notesFromCallCenter,'Notes From Call Center')" ng-if="franchiseeViewModel.notesFromCallCenter.length > 45">View All</a>
                                </span>
                            </td>
                            <td style="text-align:center">
                                <span ng-if="franchiseeViewModel.notesFromOwner!=null">
                                    <span class="bold">
                                        {{franchiseeViewModel.notesFromOwner | limitTo: 45}}{{franchiseeViewModel.notesFromOwner.length > 45 ? '...' : ''}}
                                    </span>    <a href="javascript:void(0);" ng-click="vm.getDescription(franchiseeViewModel.notesFromOwner,'Notes From Owner')" ng-if="franchiseeViewModel.notesFromOwner.length > 45">View All</a>
                                </span>
                        </tr>
                        <tr ng-if="franchisee.franchiseeViewModel.length == 0">
                            <td colspan="11" class="text-center"><span> No Records Found</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div id="printSection" class="print" style="display:none !important;">
            <div>
                <div ng-repeat="franchisee in vm.franchiseeList">
                    <div class="row heading" style="margin-left:0px !important"><b>{{franchisee.categoryName}}</b></div>
                    <table class="table table-striped table-bordered table-hover dataTable no-footer fix-width-print" role="grid" aria-describedby="sample_1_info">
                        <thead>
                            <tr role="row">
                                <th tabindex="0" aria-controls="sample_1" aria-sort="ascending" aria-label="Name"
                                    ng-click="vm.sorting(vm.SortColumns.Name);">
                                    Name
                                </th>
                                <th aria-label="Email" ng-click="vm.sorting(vm.SortColumns.Email);">
                                    Email
                                </th>
                                <th aria-label="Primary Contact" ng-click="vm.sorting(vm.SortColumns.PrimaryContact);">
                                    Primary Contact
                                </th>
                                <th tabindex="0" aria-controls="sample_1" aria-label="Address" ng-click="vm.sorting(vm.SortColumns.StreetAddress);">
                                    Address
                                </th>

                                <th tabindex="0" aria-controls="sample_1" aria-label="Country" ng-click="vm.sorting(vm.SortColumns.Country);">
                                    State
                                </th>
                                <th tabindex="0" aria-controls="sample_1" aria-label="Country" ng-click="vm.sorting(vm.SortColumns.Country);">
                                    City
                                </th>
                                <th tabindex="0" aria-controls="sample_1" aria-label="Country" ng-click="vm.sorting(vm.SortColumns.Country);">
                                    Zip
                                </th>
                                <th tabindex="0" aria-controls="sample_1" aria-label="Country" ng-click="vm.sorting(vm.SortColumns.Country);">
                                    Country
                                </th>

                                <th tabindex="0" aria-controls="sample_1" aria-label="Country" ng-click="vm.sorting(vm.SortColumns.Country);">
                                    Office Number
                                </th>
                                <th tabindex="0" aria-controls="sample_1" aria-label="Country" ng-click="vm.sorting(vm.SortColumns.Country);">
                                    Cell Number
                                </th>
                                <th tabindex="0" aria-controls="sample_1" aria-label="Country" ng-click="vm.sorting(vm.SortColumns.Country);">
                                    Call Center
                                </th>
                                <th tabindex="0" aria-controls="sample_1" aria-label="Country" ng-click="vm.sorting(vm.SortColumns.Country);">
                                    Business Directory
                                </th>
                            </tr>
                        </thead>
                        <tbody>

                            <tr role="row" ng-repeat="franchiseeViewModel in franchisee.franchiseeViewModel">

                                <td><span ng-class="{backGroundColors: vm.franchiseeId==franchisee.id}">{{franchiseeViewModel.name}}</span></td>
                                <td><a href="mailto:{{franchiseeViewModel.email}}">{{franchiseeViewModel.email}}</a></td>
                                <td>{{franchiseeViewModel.ownerName}} </td>
                                <td>{{franchiseeViewModel.address}} </td>
                                <td>{{franchiseeViewModel.state}} </td>
                                <td>{{franchiseeViewModel.city}} </td>
                                <td>{{franchiseeViewModel.zipCode}} </td>
                                <td>{{franchiseeViewModel.country}} </td>
                                <td>{{franchiseeViewModel.officePhone}} </td>
                                <td>{{franchiseeViewModel.cellPhone}} </td>
                                <td>{{franchiseeViewModel.callCenterPhone}} </td>
                                <td>{{franchiseeViewModel.businessPhone}} </td>
                            </tr>


                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
