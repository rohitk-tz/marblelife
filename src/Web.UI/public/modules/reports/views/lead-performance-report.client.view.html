<style type="text/css">
    .tooltip {
        position: relative;
        display: inline-block;
        z-index: 99999 !important;
        opacity: unset !important;
    }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 0;
            position: absolute;
            z-index: 999999;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
            top: 17px !important;
        }
    .yellow {
        background-color: yellow !important;
    }

    .customScroll-s {
        width: 100%;
        float: left;
        height: 330px;
        overflow-y: scroll;
    }

        .customScroll-s::-webkit-scrollbar {
            width: 7px;
        }



        /* Track */
        .customScroll-s::-webkit-scrollbar-track {
            box-shadow: inset 0 0 5px grey;
            border-radius: 10px;
        }

        /* Handle */
        .customScroll-s::-webkit-scrollbar-thumb {
            background: #000;
            border-radius: 10px;
        }
    .tooltip:hover .tooltiptext {
        visibility: visible;
        opacity: 1;
    }
</style>
<div class="row">
        <p ng-if="vm.leadPerformanceData.length > 0" style="padding-right: 15px !important;padding-left: 39px !important;"><b>LEAD COUNT DELIVERED</b></p>
    </div>
<div class="row" ng-if="!vm.isFranchiseeAdmin">
    <div class="col-md-12 col-xs-12" ng-if="vm.leadPerformanceData.length > 0 || vm.emptyResult">
        <table class="table table-striped" id="sample_1" aria-describedby="sample_1_info" style="width:calc(100% - 20px);margin-bottom:0px">
            <thead>
                <tr role="row" style="background-color: #dddddd !important">
                    <th style="width:5%"></th>
                    <th style="width:15%;text-align:right">Month</th>
                    <th style="text-align:center;width:calc(80%  / 13)" ng-repeat="value in vm.month track by $index">{{value}}</th>
                </tr>
                <tr role="row">
                    <th style="width:5%"></th>
                    <th style="width:15%">LOCATION</th>
                    <th colspan="13"></th>
                </tr>
            </thead>
        </table>
    </div>
    <div class="col-md-12 col-xs-12 " ng-if="vm.leadPerformanceData.length > 0">
        <div class="customScroll-s">
            <table class="table table-striped" id="sample_1" aria-describedby="sample_1_info" style="overflow: hidden;">
                <tbody>
                    <tr ng-repeat-start="item in vm.leadPerformanceData">
                        <td style="width:5% !important">
                            <span ng-if="item.isExpand"
                                  ng-click="item.isExpand = false"><i class="fa fa-minus-circle icon-red" style="cursor:pointer;"></i></span>
                            <span ng-if="!item.isExpand"
                                  ng-click="item.isExpand = true"><i class="fa fa-plus-circle icon-green" style="cursor:pointer;"></i></span>
                        </td>
                        <td style="width:15%" ng-if="!item.isZero">{{item.franchiseeName}}</td>
                        <td ng-repeat="value in item.countAdjustedData track by $index" style="text-align:center;width:calc(80% / 13)">
                            {{value}}
                        </td>
                    </tr>

                    <tr ng-if="item.isExpand">
                        <td colspan="15" style="padding:0px">
                            <table class="table" id="sample_2" role="grid" aria-describedby="sample_2_info">
                                <tr>
                                    <td style="width:20%"><span>Web Estimate Leads</span></td>
                                    <td style="text-align:center !important;width:calc(80% / 13)" class="text-center" ng-repeat="value in item.webCount track by $index"><span>{{value| number : 0}}</span></td>
                                </tr>
                                <tr>
                                    <td><span>LOCAL SITE Calls (Adjusted)*</span></td>
                                    <td style="text-align:center !important;" class="text-center" ng-repeat="value in item.adjustedDataLocal track by $index"><span> {{value | number : 0}}</span></td>
                                </tr>
                                <tr>
                                    <td><span>GOOGLE PPC SITE Calls (Adjusted)*</span></td>
                                    <td style="text-align:center !important;" class="text-center" ng-repeat="value in item.adjustedDataPPC track by $index"><span> {{value | number : 0}}</span></td>
                                </tr>
                                <tr>
                                    <td><span>NATIONAL SITE Calls (Adjusted)*</span></td>
                                    <td class="text-center" ng-repeat="value in item.adjustedDataNational track by $index"><span> {{value | number : 0}}</span></td>
                                </tr>
                                <tr style="color:#26327e;font-weight:bold">
                                    <td style="border-top: 2px solid #26327e;"><span>Total</span></td>
                                    <td style="border-top: 2px solid #26327e;" class="text-center" ng-repeat="value in item.adjustedDataNational track by $index">
                                        <span ng-if="item.webCount[$index] + item.adjustedDataLocal[$index]+ item.adjustedDataNational[$index] + item.adjustedDataPPC[$index]!=0">
                                            {{( item.webCount[$index] + item.adjustedDataLocal[$index]+ item.adjustedDataNational[$index] + item.adjustedDataPPC[$index]) | number : 0}}
                                        </span>
                                        <span ng-if="item.webCount[$index] + item.adjustedDataLocal[$index]+ item.adjustedDataNational[$index] + item.adjustedDataPPC[$index]==0"> 0</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="15"></td>
                                </tr>
                                <tr>
                                    <td><span>Monthly Website SEO Cost</span></td>
                                    <td style="text-align:center !important;" ng-repeat="value in item.leadWebSiteFranchiseeViewModel[0].webSiteSeoCost track by $index"><span>$ {{value | number : 0}}</span></td>
                                </tr>
                                <tr>
                                    <td><span>Monthly PPC Spend</span></td>
                                    <td style="text-align:center !important;" ng-repeat="value in item.leadWebSiteFranchiseeViewModel[0].webSitePpcCost track by $index"><span> $ {{value | number : 0}}</span></td>
                                </tr>
                                <tr style="color:#26327e;font-weight:bold">
                                    <td style="border-top: 2px solid #26327e;"><span>Total Spend</span></td>
                                    <td style="border-top: 2px solid #26327e;" class="text-center" ng-repeat="value in item.leadWebSiteFranchiseeViewModel[0].webSitePpcCost track by $index"><span>$ {{item.leadWebSiteFranchiseeViewModel[0].webSiteSeoCost[$index] + item.leadWebSiteFranchiseeViewModel[0].webSitePpcCost[$index] | number : 0}}</span></td>
                                </tr>
                                <tr style="color:#26327e;font-weight:bold">
                                    <td style="border-top: 2px solid #26327e;"><span>Average Lead Cost</span></td>
                                    <td style="border-top: 2px solid #26327e;" class="text-center" ng-repeat="value in vm.month track by $index">
                                        <span ng-class="{yellow: ( item.leadWebSiteFranchiseeViewModel[0].webSiteSeoCost[$index] + item.leadWebSiteFranchiseeViewModel[0].webSitePpcCost[$index]) / (item.webCount[$index] + item.adjustedDataLocal[$index]+ item.adjustedDataNational[$index]+ item.adjustedDataPPC[$index] ) >25}"
                                              ng-if="(item.webCount[$index] + item.adjustedDataLocal[$index]+ item.adjustedDataNational[$index] + item.adjustedDataPPC[$index] ) != 0">


                                            $ {{( item.leadWebSiteFranchiseeViewModel[0].webSiteSeoCost[$index] + item.leadWebSiteFranchiseeViewModel[0].webSitePpcCost[$index]) / ( item.webCount[$index] + item.adjustedDataLocal[$index]+ item.adjustedDataNational[$index] + item.adjustedDataPPC[$index] ) | number : '1.2'}}
                                        </span>
                                        <span ng-if="(item.webCount[$index] + item.adjustedDataLocal[$index]+ item.adjustedDataNational[$index] + item.adjustedDataPPC[$index] ) == 0">$ 0</span>
                                    </td>
                                </tr>
                                <!--</tbody>-->

                            </table>
                        </td>

                    </tr>
                    <tr ng-if="item.expanded" ng-repeat-end=""></tr>
                    <tr style="color:#26327e;font-weight:bold">
                        <td>
                        </td>
                        <td style="border-top: 2px solid #26327e;"><span>TOTAL</span></td>
                        <td style="border-top: 2px solid #26327e;" ng-repeat="items in vm.leadPerformanceData[0].total track by $index" class="text-center"><span> {{items | number : 0}}</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="row" ng-if="vm.isFranchiseeAdmin">
    <div class="col-md-12 col-xs-12" ng-if="vm.leadPerformanceData.length > 0">
        <table class="table table-striped" id="sample_1" aria-describedby="sample_1_info" style="overflow: hidden;">
            <thead>
                <tr role="row" style="background-color: #dddddd !important">
                    <th style="width:5%"></th>
                    <th style="width:15%;text-align:right">Month</th>
                    <th style="text-align:center;" ng-repeat="value in vm.month track by $index">{{value}}</th>
                </tr>
            </thead>
            <tbody>
                    <tr>
                        <td colspan="2" ><span>Web Estimate Leads</span></td>
                        <td style="text-align:center !important;width:calc(80% / 13)" class="text-center" ng-repeat="value in vm.leadPerformanceData[0].webCount track by $index"><span>{{value}}</span></td>
                    </tr>
                    <tr>
                        <td colspan="2" ><span>LOCAL SITE Calls (Adjusted)*</span></td>
                        <td style="text-align:center !important;" class="text-center" ng-repeat="value in vm.leadPerformanceData[0].adjustedDataLocal track by $index"><span>{{value}}</span></td>
                    </tr>
                    <tr>
                        <td colspan="2" ><span>GOOGLE PPC SITE Calls (Adjusted)*</span></td>
                        <td class="text-center" ng-repeat="value in vm.leadPerformanceData[0].adjustedDataPPC track by $index"><span>{{value}}</span></td>
                    </tr>
                    <tr>
                        <td colspan="2" ><span>NATIONAL SITE Calls (Adjusted)*</span></td>
                        <td class="text-center" ng-repeat="value in vm.leadPerformanceData[0].adjustedDataNational track by $index"><span>{{value}}</span></td>
                    </tr>
                    <tr style="color:#26327e;font-weight:bold">
                        <td colspan="2"  style="border-top: 2px solid #26327e;"><span>Total</span></td>
                        <td  style="border-top: 2px solid #26327e;" class="text-center" ng-repeat="value in vm.leadPerformanceData[0].adjustedDataNational track by $index"><span>{{vm.leadPerformanceData[0].webCount[$index] + vm.leadPerformanceData[0].adjustedDataLocal[$index]+ vm.leadPerformanceData[0].adjustedDataNational[$index] + vm.leadPerformanceData[0].adjustedDataPPC[$index] | number:0 }}</span></td>
                    </tr>
            </tbody>
        </table>
    </div>
</div>


<div class="row" style="margin-top:2% !important" ng-if="vm.leadPerformanceData.length > 0">
    <p style="padding-right: 15px !important;padding-left: 39px !important;"><b>AVERAGE LEAD COST</b></p>
</div>
<div class="row" ng-if="!vm.isFranchiseeAdmin">
    <div class="col-md-12 col-xs-12" ng-if="vm.leadPerformanceData.length > 0">
        <table class="table table-striped" id="sample_1" aria-describedby="sample_1_info" style="width:calc(100% - 20px);margin-bottom:0px">
            <thead>
                <tr role="row" style="background-color: #dddddd !important">
                    <th style="width:2%"></th>
                    <th style="width:5%">Month</th>
                    <th style="text-align:center;width:calc(80%  / 13)" ng-repeat="value in vm.month track by $index">{{value}}</th>
                </tr>
                <tr role="row">
                    <th style="width:15%;text-align:center">LOCATION</th>
                    <th colspan="14"></th>
                </tr>
            </thead>
        </table>
    </div>
    <div class="col-md-12 col-xs-12" ng-if="vm.leadPerformanceData.length > 0">
        <div class="customScroll-s">
            <table class="table table-striped table-hover">
                <tr ng-repeat-start="item in vm.leadPerformanceData">
                    <td>
                        <span ng-click="item.isExpand = false"></span>
                    </td>
                    <td ng-if="!item.isZero" style="width: 15%;">{{item.franchiseeName}}</td>
                    <td ng-if="item.isZero" style="text-align:center"><b>Location </b> </td>
                    <td ng-repeat="value in item.average track by $index" style="text-align:center;width:calc(80% / 13)">
                        <p ng-if="value!=0" ng-class="{yellow: value >25}"> $ {{value | number : '1.2'}}</p>
                        <p ng-if="value==0"> $ 0 </p>
                    </td>
                </tr>
                <tr ng-if="item.expanded" ng-repeat-end=""></tr>
                <tr style="color:#26327e;font-weight:bold">
                    <td style="width:5% !important">
                        <span ng-click="item.isExpand = false"></span>
                    </td>
                    <td style="width: 15%;color:#26327e;font-weight:bold">
                        <b>Average</b>

                    </td>
                    <td ng-repeat="values in vm.totalOfLeadCount track by $index" style="text-align:center;width:calc(80% / 13);border-top: 2px solid #26327e;">
                        <span ng-class="{yellow: (values / vm.leadPerformanceData[0].total[$index] ) >25}" ng-if="(vm.leadPerformanceData[0].total[$index]  ) !=0">
                            $ {{values / vm.leadPerformanceData[0].total[$index] | number : '1.2'}}
                        </span>
                        <span ng-if="(vm.leadPerformanceData[0].total[$index]  ) ==0">
                            $ 0
                        </span>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>

<div class="row" ng-if="vm.isFranchiseeAdmin">
    <div class="col-md-12 col-xs-12" ng-if="vm.leadPerformanceData.length > 0">
        <table class="table table-striped table-hover">
            <thead>
                <tr role="row" style="background-color: #dddddd !important">
                    <th style="width:5%"></th>
                    <th style="width:15%;text-align:right">Month</th>
                    <th style="text-align:center;width:calc(80%  / 13)" ng-repeat="value in vm.month track by $index">{{value}}</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="2"><span>Monthly Website SEO Cost</span></td>
                    <td style="text-align:center !important;width:calc(80% / 13)"
                        ng-repeat="value in vm.leadPerformanceData[0].leadWebSiteFranchiseeViewModel[0].webSiteSeoCost track by $index">
                        <span> $ {{value | number :0}}</span>
                    </td>
                </tr>
                <tr>
                    <td colspan="2"><span>Monthly PPC Spend</span></td>
                    <td style="text-align:center !important;width:calc(80% / 13)"
                        ng-repeat="value in vm.leadPerformanceData[0].leadWebSiteFranchiseeViewModel[0].webSitePpcCost track by $index">
                        <span>$ {{value | number : 0}}</span>
                    </td>
                </tr>
                <tr style="color:#26327e;font-weight:bold">
                    <td colspan="2" style="border-top: 2px solid #26327e;"><span>Total Spend</span></td>
                    <td style="border-top: 2px solid #26327e;" class="text-center"
                        ng-repeat="value in vm.leadPerformanceData[0].leadWebSiteFranchiseeViewModel[0].webSitePpcCost track by $index">
                        <span>$ {{vm.leadPerformanceData[0].leadWebSiteFranchiseeViewModel[0].webSiteSeoCost[$index] + vm.leadPerformanceData[0].leadWebSiteFranchiseeViewModel[0].webSitePpcCost[$index] | number : 0}}</span>
                    </td>
                </tr>
                <tr style="color:#26327e;font-weight:bold">
                    <td colspan="2" style="border-top: 2px solid #26327e;"><span>Average Lead Cost</span></td>
                    <td style="border-top: 2px solid #26327e;" class="text-center" ng-repeat="value in vm.leadPerformanceData[0].leadWebSiteFranchiseeViewModel[0].webSitePpcCost track by $index">
                        <span ng-class="{yellow: ( vm.leadPerformanceData[0].leadWebSiteFranchiseeViewModel[0].webSiteSeoCost[$index] + vm.leadPerformanceData[0].leadWebSiteFranchiseeViewModel[0].webSitePpcCost[$index]) / (vm.leadPerformanceData[0].webCount[$index] + vm.leadPerformanceData[0].adjustedDataLocal[$index] + vm.leadPerformanceData[0].adjustedDataNational[$index] + vm.leadPerformanceData[0].adjustedDataPPC[$index] ) >25}" ng-if="vm.leadPerformanceData[0].webCount[$index] + vm.leadPerformanceData[0].adjustedDataLocal[$index]+ vm.leadPerformanceData[0].adjustedDataNational[$index] !=0">

                            $ {{( vm.leadPerformanceData[0].leadWebSiteFranchiseeViewModel[0].webSiteSeoCost[$index] + vm.leadPerformanceData[0].leadWebSiteFranchiseeViewModel[0].webSitePpcCost[$index]) / (vm.leadPerformanceData[0].webCount[$index] + vm.leadPerformanceData[0].adjustedDataLocal[$index]+ vm.leadPerformanceData[0].adjustedDataNational[$index]  +vm.leadPerformanceData[0].adjustedDataPPC[$index] ) | number : '1.2'}}
                        </span>
                        <span ng-if="(vm.leadPerformanceData[0].webCount[$index] + vm.leadPerformanceData[0].adjustedDataLocal[$index]+ vm.leadPerformanceData[0].adjustedDataNational[$index] + vm.leadPerformanceData[0].adjustedDataPPC[$index] )==0">$ 0</span>
                    </td>
                </tr>
                <tr ng-if="item.expanded" ng-repeat-end=""></tr>
            </tbody>
        </table>
    </div>
</div>