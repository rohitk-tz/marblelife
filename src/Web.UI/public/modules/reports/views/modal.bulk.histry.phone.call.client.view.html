<style type="text/css">
    span.required {
        display: none !important;
    }

    .has-zero {
        border: 2px solid #26327e !important;
    }
    thead{
        visibility:visible !important;
    }
</style>
<div class="modal-header">
    <h4 class="modal-title pull-left">History of Phone Call </h4>
    <a href="javascript:void(0);" ng-click="vm.close()" class="pull-right"><i class="fa fa-remove"></i></a>
</div>
<div class="modal-body">
    <div class="row">

        <div class="pull-right search-single" style="padding-top:8px">
            <a class="btn btn-primary" ng-click="vm.refresh();">
                <i class="fa fa-refresh"></i>
            </a>
        </div>
        <div class="pull-right search-single" style="padding-top:8px">
            <a class="btn btn-default" ng-click="vm.resetSearch();">
                <i class="fa fa-remove"></i>
            </a>
        </div>
        <div class="pull-right search-single" ng-if="vm.option1 == '1'" style="width:170px">
            <div class="form-group form-md-line-input">
                <select class="form-control input-small" id="tech" ng-model="vm.query.franchiseeId"
                        ng-options="type.value as type.display for type in vm.franchiseeCollection" ng-change="vm.change()">
                    <option selected disabled hidden style='display: none' value='' >Choose Franchisee</option>
                </select>
                <label for="tech">Franchisee</label>
            </div>
        </div>
        <div class="pull-right search-single" style="width:170px" ng-if="vm.option1 == '2'">
            <date-picker-ts-calls control-id="registration-date" label="Date" format="MM/yyyy" model="vm.query.date" />
        </div>
        <div class="pull-right" style="padding-top: 20px;width: auto;">
            <div class="search-single">
                <input type="checkbox" name="gender" value="male" ng-model="vm.histryByFranchisee" ng-click="vm.histryByDate=false;vm.option1 = '1';vm.query.franchiseeId='62';vm.query.date=null;"> History By Franchisee
                <input style="margin-left:10px" type="checkbox" name="gender" value="female" ng-model="vm.histryByDate" ng-click="vm.histryByFranchisee=false;vm.option1 = '2';"> History By Date

            </div>
        </div>
    </div>
    <div class="table-scrollable table-mbl">
        <div style="overflow: auto;height:500px !important">
                <div class="row" style="margin-top:10px !important">
                    <table class="table table-striped table-bordered table-hover dataTable no-footer" id="sample_1" aria-describedby="sample_1_info">
                        <thead fix-head>
                            <tr role="row">

                                <th style="text-align:center" ng-class="{'sorting_desc': vm.query.sort.order == 1 && vm.query.sort.propName == vm.SortColumns.MonthYear,
                                                        'sorting_asc' : vm.query.sort.order == 0  && vm.query.sort.propName == vm.SortColumns.MonthYear,
                                                        'sorting': vm.query.sort.propName != vm.SortColumns.MonthYear }" ng-click="vm.sorting(vm.SortColumns.MonthYear);">
                                    <span style="font-weight: bolder; margin-top: 38px !important;">Month,Year</span>
                                    <span style="font-weight:bolder;margin-top: 38px !important;visibility: hidden;">Month,Year</span>
                                </th>
                                <th><span style="font-weight:bolder">Charges Of Call(in $)</span></th>
                                <th><span style="font-weight:bolder">No. Of Calls In a Month</span></th>
                                <th><span style="font-weight:bolder">Total Cost(in $)</span></th>
                                <th style="text-align:center" ng-class="{'sorting_desc': vm.query.sort.order == 1 && vm.query.sort.propName == vm.SortColumns.FranchiseeName,
                                                        'sorting_asc' : vm.query.sort.order == 0  && vm.query.sort.propName == vm.SortColumns.FranchiseeName,
                                                        'sorting': vm.query.sort.propName != vm.SortColumns.FranchiseeName }"  ng-click="vm.sorting(vm.SortColumns.FranchiseeName);">
                                <span style="font-weight: bolder; margin-top: 38px !important; ">Franchisee </span>
                                <span style="font-weight: bolder; margin-top: 38px !important;visibility:hidden ">Franchisee </span>
</th>
                                <th style="text-align:center"><span style="font-weight: bolder; margin-top: 38px !important">InvoiceItem#</span> <span style="font-weight:bolder;margin-top: 38px !important;visibility: hidden;">Month,Year</span></th>
                                <th style="text-align:center"><span style="font-weight:bolder">Generated By</span></th>
                                <th style="text-align:center" ng-class="{'sorting_desc': vm.query.sort.order == 1 && vm.query.sort.propName == vm.SortColumns.Timestamp,
                                                        'sorting_asc' : vm.query.sort.order == 0  && vm.query.sort.propName == vm.SortColumns.Timestamp,
                                                        'sorting': vm.query.sort.propName != vm.SortColumns.Timestamp }" ng-click="vm.sorting(vm.SortColumns.Timestamp);">
                                    <span style="font-weight: bolder; margin-top: 38px !important;">Timestamp</span>
                                    <span style="font-weight:bolder;margin-top: 38px !important;visibility: hidden;">Timestamp</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in vm.franchiseePhoneCall" ng-class="{'has-zero' : $index==0}">
                            <!--<tr ng-repeat="item in vm.franchiseePhoneCall | orderBy : 'dateOfChange'" ng-class="{'has-zero' : $index==0}">-->
                                <td style="text-align:center;width:calc(80% / 5)">
                                    {{item.month}}
                                </td>
                                <td style="text-align:center;width:calc(80% / 5)">
                                    <span>
                                        {{item.chargesForPhone}}
                                    </span>
                                </td>
                                <td style="text-align:center;width:calc(80% / 5)">
                                    <span>
                                        {{item.callCount}}
                                    </span>
                                </td>
                                <td style="text-align:center;width:calc(80% / 5)">
                                    {{item.totalCost}}
                                </td>
                                <td style="text-align:center;width:calc(80% / 5)">
                                    {{item.franchiseeName}}
                                </td>
                                <td style="text-align:center;width:calc(80% / 5)">
                                    {{item.invoiceId}}
                                </td>
                                <td style="text-align:center;width:calc(80% / 5)">
                                    {{item.personName}}
                                </td>
                                <td style="text-align:center;width:calc(80% / 5)">
                                    {{item.currentDate | dateTimeFilter}}
                                    <!--{{item.currentDate | date : 'mediumTime'}}-->
                                </td>
                            </tr>

                            Ca

                            <tr ng-if="vm.franchiseePhoneCall.length==0" ng-class="{'has-zero' : $index==0}">
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>No Records Found</td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
        </div>
    </div>
</div>
<div class="modal-footer clear-both">
    <button type="button" class="btn default" ng-click="vm.close();">Close</button>
</div>